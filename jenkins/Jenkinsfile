pipeline{
	environment {
        
        VERSION = "1.1.1"
        REGISTRY = 'test/nodejs'
        REGISTRY_CREDENTIAL = 'conatiner-registery'
    }
	agent {
      
		kubernetes {
//             defaultContainer 'jnlp'
            yamlFile 'build.yaml'
			idleMinutes 5 
        }
	}
	stages{
		stage("docker"){
            steps {

               	container('docker') {

			sh "docker version"
                   	sh "docker build -t ${REGISTRY}:${VERSION} ."
             	}
		    container('helm') {
                    sh "helm version"
                }
            
        }
		      }


 		}
	
}
